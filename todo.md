# 词组复习游戏 - 开发计划

## 一、功能模块

### 1. 题库系统
#### 1.1 题库加载
- [ ] 文件加载模式（db参数）
  - 支持指定JSON文件
  - 默认使用data/example.json
  - 同域安全限制
- [ ] Base64加载模式（rawdb参数）
  - 解码base64数据
  - 解析JSON内容
  - 验证数据格式
- [ ] 自动检测加载方式

#### 1.2 错题管理
- [ ] 错题记录
  - 统计错误次数
  - 按错误次数排序
- [ ] 错题复习
  - 生成错题题库
  - 转换为base64
  - 生成复习链接

### 2. 答题系统
#### 2.1 答题规则
- [ ] 首次答对计分制
  - 答错后不再得分
  - 保持答题反馈

#### 2.2 完成逻辑
- [ ] 题库终止机制
  - 完成所有题目后停止
  - 显示统计信息
- [ ] 错题展示
  - 仅显示完整词组(full)
  - 显示错误次数
- [ ] 一键复习
  - "练习错题"按钮
  - 自动跳转功能

## 二、技术实现

### 1. 数据层
#### 1.1 参数处理
```typescript
// URL参数示例
?db=custom-phrases.json    // 文件模式
?rawdb=base64String       // Base64模式
```

#### 1.2 数据结构
```typescript
interface Question {
  full: string;           // 完整词组
  sentence: string;       // 例句
  errorCount?: number;    // 错误次数
  attempted?: boolean;    // 是否已尝试
}
```

### 2. 实现步骤

#### 第一阶段：基础架构
1. 题库加载系统
   - URL参数解析
   - 加载方式判断
   - 数据格式验证

2. 答题核心逻辑
   - 状态管理优化
   - 计分规则实现
   - 完成检测机制

#### 第二阶段：错题系统
1. 错题追踪
   - 错误次数记录
   - 错题数据结构

2. 错题复习功能
   - 生成错题集
   - Base64转换
   - 跳转机制

#### 第三阶段：用户体验
1. 界面优化
   - 完成页面设计
   - 错题统计展示
   - 复习按钮实现

2. 交互完善
   - 加载状态提示
   - 错误信息反馈
   - 复习跳转流程

## 三、注意事项

### 1. 安全性
- 数据验证
  - JSON格式检查
  - Base64合法性
  - 跨域问题处理

### 2. 性能优化
- 数据处理效率
- 状态管理性能
- 页面渲染优化

### 3. 代码质量
- 模块化结构
- 错误处理
- 代码复用

### 4. 用户体验
- 友好的错误提示
- 清晰的操作反馈
- 流畅的复习流程